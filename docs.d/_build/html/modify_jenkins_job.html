

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>modify_jenkins_job module &mdash; tbscssw/clonezilla-img-mgmt 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="restore_system module" href="restore_system.html" />
    <link rel="prev" title="create_json_file_in_repo module" href="create_json_file_in_repo.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> tbscssw/clonezilla-img-mgmt
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">code.d</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="create_json_file_in_repo.html">create_json_file_in_repo module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">modify_jenkins_job module</a></li>
<li class="toctree-l2"><a class="reference internal" href="restore_system.html">restore_system module</a></li>
<li class="toctree-l2"><a class="reference internal" href="restore_system_test.html">restore_system_test module</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tbscssw/clonezilla-img-mgmt</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">code.d</a> &raquo;</li>
        
      <li>modify_jenkins_job module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/modify_jenkins_job.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-modify_jenkins_job">
<span id="modify-jenkins-job-module"></span><h1>modify_jenkins_job module<a class="headerlink" href="#module-modify_jenkins_job" title="Permalink to this headline">¶</a></h1>
<p>When creating a new clonezilla image we should add it
to the jenkins configuration of both the prd and dev jobs.
We use the tbsciaw account and the associated api key to
authenticate against. Copy the config change it and write it back.</p>
<dl class="py function">
<dt id="modify_jenkins_job.get_jenkins_config">
<code class="sig-prename descclassname">modify_jenkins_job.</code><code class="sig-name descname">get_jenkins_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">api_key</span></em>, <em class="sig-param"><span class="n">portal</span></em><span class="sig-paren">)</span><a class="headerlink" href="#modify_jenkins_job.get_jenkins_config" title="Permalink to this definition">¶</a></dt>
<dd><p>The config file is necessary to create new jobs.
<a class="reference external" href="https://support.cloudbees.com/hc/en-us/articles/">https://support.cloudbees.com/hc/en-us/articles/</a>
220857567-How-to-create-a-job-using-the-REST-API-and-cURL-</p>
</dd></dl>

<dl class="py function">
<dt id="modify_jenkins_job.modify_jenkins_config">
<code class="sig-prename descclassname">modify_jenkins_job.</code><code class="sig-name descname">modify_jenkins_config</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#modify_jenkins_job.modify_jenkins_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Mass of the work is done here.</p>
</dd></dl>

<dl class="py function">
<dt id="modify_jenkins_job.modify_jenkins_xml">
<code class="sig-prename descclassname">modify_jenkins_job.</code><code class="sig-name descname">modify_jenkins_xml</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jenkins_config_file</span></em>, <em class="sig-param"><span class="n">new_image_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#modify_jenkins_job.modify_jenkins_xml" title="Permalink to this definition">¶</a></dt>
<dd><p>Im aware of the xml tool but these seems to work as well for this use case and is simpler</p>
</dd></dl>

<dl class="py function">
<dt id="modify_jenkins_job.post_to_jenkins">
<code class="sig-prename descclassname">modify_jenkins_job.</code><code class="sig-name descname">post_to_jenkins</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url_string</span></em>, <em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">api_key</span></em>, <em class="sig-param"><span class="n">jenkins_config_file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#modify_jenkins_job.post_to_jenkins" title="Permalink to this definition">¶</a></dt>
<dd><p>If we provide all the information needed this should not be the same as using
go/tbsimaging.</p>
</dd></dl>

<dl class="py function">
<dt id="modify_jenkins_job.run_a_command">
<code class="sig-prename descclassname">modify_jenkins_job.</code><code class="sig-name descname">run_a_command</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cmd_to_run</span></em><span class="sig-paren">)</span><a class="headerlink" href="#modify_jenkins_job.run_a_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a standard linux command on a system.</p>
</dd></dl>

<dl class="py function">
<dt id="modify_jenkins_job.run_parser">
<code class="sig-prename descclassname">modify_jenkins_job.</code><code class="sig-name descname">run_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#modify_jenkins_job.run_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiate the parser</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="restore_system.html" class="btn btn-neutral float-right" title="restore_system module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="create_json_file_in_repo.html" class="btn btn-neutral float-left" title="create_json_file_in_repo module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Andrew Chandler

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>